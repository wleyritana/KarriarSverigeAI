<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ t.app_title }}</title>
<link rel="stylesheet" href="/static/styles.css">
<script>
function toggle(id){
  var e=document.getElementById(id);
  e.style.display = e.style.display==="none"?"block":"none";
}

function animateOne(el){
  if(!el) return;
  const target = Math.max(0, Math.min(100, parseInt(el.dataset.score || "0", 10)));
  // start state
  el.style.width = "0%";
  el.textContent = "0%";
  // animate width via CSS transition after layout
  requestAnimationFrame(() => {
    el.style.width = target + "%";
  });
  // animate number
  const duration = 900;
  const start = performance.now();
  function tick(now){
    const t = Math.min(1, (now - start)/duration);
    const val = Math.round(target * t);
    el.textContent = val + "%";
    if(t < 1) requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
}

document.addEventListener("DOMContentLoaded", () => {
  animateOne(document.getElementById("hireFill"));
  animateOne(document.getElementById("matchFill"));
});
</script>
</head>
<body>
<nav class="navbar">
  <div class="nav-title">Karriar Sverige AI</div>
  <div class="nav-links"><a href="/logout">Logout</a>
    <a href="/">Home</a>
    <a href="/download_pdf">Download PDF</a>
  </div>
</nav><div class="container">

<h1>{{ t.app_title }}</h1>

<div class="card">
<h2>{{ t.hireability_score }}</h2>
<div class="bar {{ hire_color }}"><div class="fill" id="hireFill" data-score="{{ hire_score }}">0%</div></div>
</div>

<div class="card">
<h2>{{ t.match_score }}</h2>
<div class="bar {{ match_color }}"><div class="fill" id="matchFill" data-score="{{ match_score }}">0%</div></div>
</div>

{% for title, content in {
"Module 1 – Recruiter Match (Rekryterarmatchning)": match,
"Module 2 – Optimized CV (Optimerat CV)": optimized,
"Module 3 – ATS Audit (ATS-granskning)": ats,
"Module 4 – ATS Submission CV (ATS-anpassat CV för ansökan)": ats_cv,
"Module 5 – Interview Pack (Intervjupaket)": interview,
"Module 6 – Culture Analysis (Kulturanalys)": culture_report,
"Requirement Intelligence (Kravanalys)": deep,
"Recruiter Psychology (Rekryterarpsykologi)": psyche,
"Hireability Explanation (Förklaring av anställningsbarhet)": hire
}.items() %}

<div class="card">
<h3 onclick="toggle('sec{{ loop.index }}')" style="cursor:pointer;">{{ title }}</h3>
<pre id="sec{{ loop.index }}" style="display:none;">{{ content }}</pre>
</div>

{% endfor %}

<a href="/">{{ t.run_again }}</a>

</div></body>
</html>
